<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ffscrapr">
<title>ffscrapr: Managing Cache • ffscrapr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-2.7.5/MathJax.js"></script><script src="../deps/MathJax-2.7.5/TeX-AMS-MML_HTMLorMML.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="ffscrapr: Managing Cache">
<meta property="og:description" content="ffscrapr">
<meta property="og:image" content="https://ffscrapr.ffverse.com/reference/figures/logo.svg">
<meta property="og:image:alt" content="ffscrapr - an R package for Fantasy Football APIs">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@_TanHo">
<meta name="twitter:site" content="@DynastyProcess">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LS05E6KG74"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-LS05E6KG74');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <a class="navbar-brand me-2" href="../index.html">ffscrapr</a>
    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.8.18</small>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/mfl_basics.html">MFL: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/sleeper_basics.html">Sleeper: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/fleaflicker_basics.html">Fleaflicker: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/espn_basics.html">ESPN: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/espn_authentication.html">ESPN: Private Leagues</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Custom API Calls</h6></li>
    <li><a class="dropdown-item" href="../articles/mfl_getendpoint.html">MFL: Get Endpoint</a></li>
    <li><a class="dropdown-item" href="../articles/sleeper_getendpoint.html">Sleeper: Get Endpoint</a></li>
    <li><a class="dropdown-item" href="../articles/fleaflicker_getendpoint.html">Fleaflicker: Get Endpoint</a></li>
    <li><a class="dropdown-item" href="../articles/espn_getendpoint.html">ESPN: Get Endpoint</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Cache</h6></li>
    <li><a class="dropdown-item" href="../articles/ffscrapr_caching.html">ffscrapr: Managing Cache</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://discord.com/invite/5Er2FBnnQa"><span class="fa fab fa-discord fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ffverse/ffscrapr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">More</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-more">
<li><h6 class="dropdown-header" data-toc-skip>ffverse</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.ffverse.com">ffverse.com</a></li>
    <li><a class="external-link dropdown-item" href="https://ffsimulator.ffverse.com">ffsimulator</a></li>
    <li><a class="external-link dropdown-item" href="https://ffpros.ffverse.com">ffpros</a></li>
    <li><a class="external-link dropdown-item" href="https://www.github.com/ffverse">ffverse GitHub</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>nflverse</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.nflfastr.com">nflfastR package</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/nflverse">nflverse GitHub</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>DynastyProcess</h6></li>
    <li><a class="external-link dropdown-item" href="https://dynastyprocess.com">DynastyProcess.com</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/dynastyprocess">DynastyProcess GitHub</a></li>
  </ul>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">



<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>ffscrapr: Managing Cache</h1>
                        <h4 data-toc-skip class="author">Tan Ho</h4>
                        <h4 data-toc-skip class="date">2024-05-29</h4>
            <small class="dont-index">Source: <a href="https://github.com/ffverse/ffscrapr/blob/HEAD/vignettes/ffscrapr_caching.Rmd" class="external-link"><code>vignettes/ffscrapr_caching.Rmd</code></a></small>
      <div class="d-none name"><code>ffscrapr_caching.Rmd</code></div>
    </div>
        <div class="section level2">
<h2 id="caching-its-responsible-web-etiquette">Caching: It’s Responsible Web Etiquette!<a class="anchor" aria-label="anchor" href="#caching-its-responsible-web-etiquette"></a>
</h2>
<p>One of the many packages that inspired ffscrapr is Dmytro
Perepolkin’s <a href="https://dmi3kno.github.io/polite/" class="external-link">polite</a>
package, which sets out some pillars of responsible web etiquette,
including introducing yourself, taking slowly, and never asking twice
for the same thing.</p>
<p>ffscrapr gives you convenient routes to support these:</p>
<ul>
<li><p>You can set a <code>user_agent</code> string with any connection
to help identify yourself to the API platform (MFL actually gives you a
higher rate limit if you <a href="https://api.myfantasyleague.com/2020/api_info" class="external-link">register with them
as an API Client</a>!)</p></li>
<li><p>You can set <code>rate_limit</code> options to help manage the
load on the API (and to comply with any restrictions that APIs have set
out)</p></li>
<li><p>Behind the scenes, ffscrapr is saving the results of expensive
(i.e. slow, data-heavy) and stable (i.e. not likely to change rapidly)
queries so that a) it can return things faster to you and b) minimize
server load.</p></li>
</ul>
<p>This vignette explains and helps you manage this caching.</p>
</div>
<div class="section level2">
<h2 id="what-is-being-cached-how-long-is-it-being-cached-for">What is being cached? How long is it being cached for?<a class="anchor" aria-label="anchor" href="#what-is-being-cached-how-long-is-it-being-cached-for"></a>
</h2>
<p>ffscrapr’s core functions often loop over the same, stable endpoints
to help return the data for each function - things like “player
names/positions/teams”, “franchise IDs/names”, and “league scoring
rules” are all used frequently. ffscrapr incorporates <a href="https://github.com/r-lib/memoise" class="external-link">memoise</a> package to help with
this functionality, and (as of this writing) saves the results of these
functions:</p>
<ul>
<li>
<code><a href="../reference/mfl_players.html">mfl_players()</a></code>, <code><a href="../reference/sleeper_players.html">sleeper_players()</a></code>,
<code><a href="../reference/fleaflicker_players.html">fleaflicker_players()</a></code> - these functions are stored for 7
days</li>
<li>
<code><a href="../reference/ff_franchises.html">ff_franchises()</a></code>, <code><a href="../reference/ff_scoring.html">ff_scoring()</a></code>,
<code><a href="../reference/ff_league.html">ff_league()</a></code> - these functions are stored for 24 hours</li>
<li>
<code><a href="../reference/ff_standings.html">ff_standings()</a></code>, <code><a href="../reference/ff_playerscores.html">ff_playerscores()</a></code>,
<code><a href="../reference/ff_starters.html">ff_starters()</a></code>, <code><a href="../reference/ff_schedule.html">ff_schedule()</a></code> ,
<code><a href="../reference/ff_userleagues.html">ff_userleagues()</a></code> - these functions are stored for one
hour</li>
<li>
<code><a href="../reference/dp_playerids.html">dp_playerids()</a></code> and <code><a href="../reference/dp_values.html">dp_values()</a></code> - these
functions are stored for 24 hours</li>
</ul>
<p>You can find an updated list of cached functions in the <a href="https://github.com/ffverse/ffscrapr/blob/main/R/zzz.R" class="external-link">zzz.R</a>
source code page.</p>
</div>
<div class="section level2">
<h2 id="where-is-it-being-cached">Where is it being cached?<a class="anchor" aria-label="anchor" href="#where-is-it-being-cached"></a>
</h2>
<p>By default, ffscrapr will save the results of each function call
(i.e. function + arguments) into memory.</p>
<p>If you would like to have your cache stored on your local filesystem,
you can adjust this behaviour by adding the following line to your (or
your project) .Rprofile, or by adding it BEFORE you library/load the
package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>ffscrapr.cache <span class="op">=</span> <span class="st">"filesystem"</span><span class="op">)</span></span></code></pre></div>
<p>This will instruct ffscrapr to store the cache on your machine, as
dictated by the typical cache location for your operating system. You
can see where this is by running the following line of code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rappdirs</span><span class="fu">::</span><span class="fu"><a href="https://rappdirs.r-lib.org/reference/user_cache_dir.html" class="external-link">user_cache_dir</a></span><span class="op">(</span><span class="st">"ffscrapr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="how-can-i-clear-the-cache">How can I clear the cache?<a class="anchor" aria-label="anchor" href="#how-can-i-clear-the-cache"></a>
</h2>
<p>You can use the following function to clear the cache (whether it is
in memory or on your filesystem):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">.ffscrapr_clear_cache</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>
    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://twitter.com/_TanHo" class="external-link">Tan Ho</a>.</p>
</div>
<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
    </footer>
</div>
  </body>
</html>
