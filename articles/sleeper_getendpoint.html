<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ffscrapr">
<title>Sleeper: Get Endpoint • ffscrapr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-2.7.5/MathJax.js"></script><script src="../deps/MathJax-2.7.5/TeX-AMS-MML_HTMLorMML.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Sleeper: Get Endpoint">
<meta property="og:description" content="ffscrapr">
<meta property="og:image" content="https://ffscrapr.ffverse.com/reference/figures/logo.svg">
<meta property="og:image:alt" content="ffscrapr - an R package for Fantasy Football APIs">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@_TanHo">
<meta name="twitter:site" content="@DynastyProcess">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LS05E6KG74"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-LS05E6KG74');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <a class="navbar-brand me-2" href="../index.html">ffscrapr</a>
    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.8.18</small>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/mfl_basics.html">MFL: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/sleeper_basics.html">Sleeper: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/fleaflicker_basics.html">Fleaflicker: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/espn_basics.html">ESPN: Basics</a></li>
    <li><a class="dropdown-item" href="../articles/espn_authentication.html">ESPN: Private Leagues</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Custom API Calls</h6></li>
    <li><a class="dropdown-item" href="../articles/mfl_getendpoint.html">MFL: Get Endpoint</a></li>
    <li><a class="dropdown-item" href="../articles/sleeper_getendpoint.html">Sleeper: Get Endpoint</a></li>
    <li><a class="dropdown-item" href="../articles/fleaflicker_getendpoint.html">Fleaflicker: Get Endpoint</a></li>
    <li><a class="dropdown-item" href="../articles/espn_getendpoint.html">ESPN: Get Endpoint</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Cache</h6></li>
    <li><a class="dropdown-item" href="../articles/ffscrapr_caching.html">ffscrapr: Managing Cache</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://discord.com/invite/5Er2FBnnQa"><span class="fa fab fa-discord fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ffverse/ffscrapr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">More</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-more">
<li><h6 class="dropdown-header" data-toc-skip>ffverse</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.ffverse.com">ffverse.com</a></li>
    <li><a class="external-link dropdown-item" href="https://ffsimulator.ffverse.com">ffsimulator</a></li>
    <li><a class="external-link dropdown-item" href="https://ffpros.ffverse.com">ffpros</a></li>
    <li><a class="external-link dropdown-item" href="https://www.github.com/ffverse">ffverse GitHub</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>nflverse</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.nflfastr.com">nflfastR package</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/nflverse">nflverse GitHub</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>DynastyProcess</h6></li>
    <li><a class="external-link dropdown-item" href="https://dynastyprocess.com">DynastyProcess.com</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/dynastyprocess">DynastyProcess GitHub</a></li>
  </ul>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">



<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Sleeper: Get Endpoint</h1>
                        <h4 data-toc-skip class="author">Tan Ho</h4>
                        <h4 data-toc-skip class="date">2024-05-29</h4>
            <small class="dont-index">Source: <a href="https://github.com/ffverse/ffscrapr/blob/HEAD/vignettes/sleeper_getendpoint.Rmd" class="external-link"><code>vignettes/sleeper_getendpoint.Rmd</code></a></small>
      <div class="d-none name"><code>sleeper_getendpoint.Rmd</code></div>
    </div>
        <div class="section level2">
<h2 id="creating-custom-sleeper-api-calls">Creating custom Sleeper API calls<a class="anchor" aria-label="anchor" href="#creating-custom-sleeper-api-calls"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ffscrapr.ffverse.com">ffscrapr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glue.tidyverse.org/" class="external-link">glue</a></span><span class="op">)</span></span></code></pre></div>
<p>The <a href="https://docs.sleeper.com" class="external-link">Sleeper API is pretty
extensive</a>. If there is something you’d like to access that’s beyond
the current scope of ffscrapr, you can use the lower-level
“<code>sleeper_getendpoint</code>” function to create a GET request and
access the data, while still using the authentication and rate-limiting
features I’ve already created.</p>
<p>Here is an example of how you can call one of the endpoints - in this
case, let’s pull Sleeper’s trending players data!</p>
<p>We’ll start by opening up this page, <a href="https://docs.sleeper.com/#trending-players" class="external-link uri">https://docs.sleeper.com/#trending-players</a>, which is the
documentation page for this particular endpoint. From here, we can see
that Sleeper’s documentation says the endpoint is:</p>
<p><code>https://api.sleeper.app/v1/players/&lt;sport&gt;/trending/&lt;type&gt;?lookback_hours=&lt;hours&gt;&amp;limit=&lt;int&gt;</code></p>
<p>On first glance, you can see that it takes two parameters within the
endpoint call itself (<code>sport</code> and <code>type</code>) and we
can further adjust the query with HTTP parameters
<code>lookback_hours</code> and <code>limit</code>. The
sleeper_getendpoint function already has the
<code>https://api.sleeper.app/v1/</code> part encoded, so all we’ll need
to do is pass in the remaining part of the URL as the endpoint, and pass
the HTTP parameters in as arguments to the function (these are case
sensitive!)</p>
<p>We can use the <code>glue</code> package to parameterise this,
although you can also use base R’s paste function just as easily.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">type</span> <span class="op">&lt;-</span> <span class="st">"add"</span></span>
<span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">'players/nfl/trending/{type}'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">query</span></span>
<span><span class="co">#&gt; players/nfl/trending/add</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">response_trending</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sleeper_getendpoint.html">sleeper_getendpoint</a></span><span class="op">(</span><span class="va">query</span>,lookback_hours <span class="op">=</span> <span class="fl">48</span>, limit <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; Using request.R from "ffscrapr"</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">response_trending</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 3</span></span>
<span><span class="co">#&gt;  $ content :List of 10</span></span>
<span><span class="co">#&gt;  $ query   : chr "https://api.sleeper.app/v1/players/nfl/trending/add?lookback_hours=48&amp;limit=10"</span></span>
<span><span class="co">#&gt;  $ response:List of 9</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr "response"</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr "sleeper_api"</span></span></code></pre></div>
<p>Along with the parsed content, the function also returns the query
and the response that was sent by the server. These are helpful for
debugging, but we can turn the content into a dataframe with some
careful application of the tidyverse.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df_trending</span> <span class="op">&lt;-</span> <span class="va">response_trending</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="st">"content"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_trending</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   player_id  count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 6820      <span style="text-decoration: underline;">521</span>768</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2161      <span style="text-decoration: underline;">374</span>758</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 7045      <span style="text-decoration: underline;">235</span>794</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 3164      <span style="text-decoration: underline;">205</span>688</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> GB        <span style="text-decoration: underline;">203</span>645</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> HOU       <span style="text-decoration: underline;">154</span>698</span></span></code></pre></div>
<p>This isn’t very helpful without knowing who these players are, so
let’s pull the players endpoint in as well - this one has a convenient
function!</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">players</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sleeper_players.html">sleeper_players</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">player_id</span>, <span class="va">player_name</span>, <span class="va">pos</span>, <span class="va">team</span>, <span class="va">age</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trending</span> <span class="op">&lt;-</span> <span class="va">df_trending</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">players</span>, by <span class="op">=</span> <span class="st">"player_id"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">trending</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 6</span></span></span>
<span><span class="co">#&gt;    player_id  count player_name           pos   team    age</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 6820      <span style="text-decoration: underline;">521</span>768 Clyde Edwards-Helaire RB    KC     25.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2161      <span style="text-decoration: underline;">374</span>758 Jerick McKinnon       RB    KC     32.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 7045      <span style="text-decoration: underline;">235</span>794 Joshua Kelley         RB    LAC    26.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 3164      <span style="text-decoration: underline;">205</span>688 Ezekiel Elliott       RB    NE     28.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> GB        <span style="text-decoration: underline;">203</span>645 <span style="color: #BB0000;">NA</span>                    DEF   GB     <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> HOU       <span style="text-decoration: underline;">154</span>698 <span style="color: #BB0000;">NA</span>                    DEF   HOU    <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 10235     <span style="text-decoration: underline;">140</span>729 Roschon Johnson       RB    CHI    23.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 9487      <span style="text-decoration: underline;">137</span>447 Parker Washington     WR    JAX    22.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> NO        <span style="text-decoration: underline;">132</span>410 <span style="color: #BB0000;">NA</span>                    DEF   NO     <span style="color: #BB0000;">NA</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 4089      <span style="text-decoration: underline;">108</span>768 Gerald Everett        TE    LAC    29.9</span></span></code></pre></div>
<p>There - this means something to us now! As of this writing
(2020-11-10), Kalen Ballage was the most added player. Haven’t we been
bitten by this before?</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>
    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://twitter.com/_TanHo" class="external-link">Tan Ho</a>.</p>
</div>
<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
    </footer>
</div>
  </body>
</html>
